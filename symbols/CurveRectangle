package symbols;

import java.util.Collection;
import java.util.Collections;

import javafx.scene.Cursor;
import javafx.scene.paint.Color;
import javafx.scene.shape.CubicCurve;
import javafx.scene.shape.Path;
import javafx.scene.shape.PathElement;
import javafx.scene.text.Text;
import javafx.scene.shape.CubicCurveTo;
import javafx.scene.shape.LineTo;
import javafx.scene.shape.MoveTo;;

/**
 * CurveRectangle继承Path类，曲线多边形
 * 
 * @author suisui
 *
 */
public class CurveRectangle extends Path {
	private boolean isElected = false; // 选中状态，默认没被选中
	private Text text; // 文本框
	private int type; // 图形类型
	private double x = 0;
	private double y= 0;
	private double height = 0;
	private double width = 0;
	
	/**
	 * 私有函数，初始化图形的属性
	 */
	private void initialize() {
		updatePath();
		this.setStrokeWidth(1.3);
		this.setCursor(Cursor.HAND);
		this.setStroke(Color.BLACK);
		this.setFill(Color.WHITE);
		this.setOnMouseDragged(e -> {
			x = e.getX() - width / 2;
			y = e.getY() + height / 2;
			updatePath();
		});
	}

	/**
	 * 私有函数，更新曲线矩形的Path集
	 */
	private void updatePath() {
		this.getElements().clear();
		double controlX1 = x + width / 2;
		double controlY1 = y - height / 2;
		double controlX2 = x + width / 2;
		double controlY2 = y + height / 2;
		MoveTo start1 = new MoveTo(x, y);
		LineTo line1 = new LineTo(x, y - height);
		LineTo line2 = new LineTo(x + width, y - height);
		LineTo line3 = new LineTo(x + width, y);
		CubicCurveTo curve = new CubicCurveTo(controlX1, controlY1, controlX2, controlY2, x, y);
		this.getElements().addAll(start1, line1, line2, line3, curve);
	}
	
	public CurveRectangle(double x, double y, double width, double height) {
		this.x = x;
		this.y = y;
		this.width = width;
		this.height = height;
		initialize();
	}
}
